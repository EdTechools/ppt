import{g as H,h as q,k as O,l as J,m as K,n as Q}from"../modules/unplugin-icons-Ca8F49f6.js";import{bC as U,A as y,d as A,o as n,c,i as E,C as e,t as T,G as M,P as X,L as Y,O as Z,bD as ee,bv as te,b as k,e as t,l as o,k as h,h as P,g as se,x as oe,F as ne}from"../modules/vue-BOVj5Shv.js";import{a as re,u as ae,c as ie,d as le,h as ce,s as ue,j as me,k as de,l as pe,m as _e,n as fe,_ as ve}from"../index-pFKLFa-J.js";import{u as xe}from"./DrawingPreview.vue_vue_type_script_setup_true_lang-DFhvOrCk.js";import{r as ge,u as ke,a as he,S as ye,_ as be,G as Ce,b as Se,c as we,o as $e}from"../shortcuts-BeL4JqRq.js";import{C as ze}from"./ClicksSlider-CuwpotER.js";import{_ as Ne}from"./DrawingControls.vue_vue_type_style_index_0_lang--yUD8nPD.js";import{_ as B}from"./IconButton.vue_vue_type_script_setup_true_lang-BXU6HbqL.js";import{_ as Fe}from"./NoteDisplay.vue_vue_type_style_index_0_lang-3y5vmUkl.js";import{a as Te,S as D}from"./SlideContainer-C97zvfND.js";import{S as Me}from"../SlideWrapper-C7Hnvpkd.js";import"../modules/shiki-sKuWUF9L.js";import"../status_store-DRWidOEM.js";function Pe(){const{counter:v,isActive:r,reset:a,pause:u,resume:d}=U(1e3,{controls:!0});return{timer:y(()=>{const m=v.value,b=Math.floor(m%60).toString().padStart(2,"0");return`${Math.floor(m/60).toString().padStart(2,"0")}:${b}`}),isTimerAvctive:r,resetTimer:a,toggleTimer:()=>r.value?u():d()}}const Be=A({__name:"NoteStatic",props:{no:{},class:{},clicksContext:{}},setup(v){const r=v,{info:a}=Te(r.no);return(u,d)=>{var p,m;return n(),c(Fe,{class:E(r.class),note:(p=e(a))==null?void 0:p.note,"note-html":(m=e(a))==null?void 0:m.noteHTML,"clicks-context":u.clicksContext},null,8,["class","note","note-html","clicks-context"])}}}),De={class:"bg-main h-full slidev-presenter"},Ae={class:"relative grid-section next flex flex-col p-2 lg:p-4"},Ee={key:1,class:"h-full flex justify-center items-center"},Ie={key:0,class:"grid-section note of-auto"},Le={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Re={class:"border-t border-main py-1 px-2 text-sm"},je={class:"grid-section bottom flex"},Ge={class:"group flex items-center justify-center pl-4 select-none"},Ve={class:"w-22px cursor-pointer"},We={class:"group-not-hover:hidden flex flex-col items-center"},He={class:"text-2xl px-3 my-auto tabular-nums"},qe={class:"progress-bar"},Oe=A({__name:"presenter",setup(v){const r=T();ge(),ke(r),he();const{clicksContext:a,currentSlideNo:u,currentSlideRoute:d,hasNext:p,nextRoute:m,slides:b,getPrimaryClicks:w,total:I}=re(),{isDrawing:L}=xe();ae({title:`Presenter - ${ue}`}),T(!1);const{timer:R,isTimerAvctive:j,resetTimer:$,toggleTimer:z}=Pe(),G=y(()=>b.value.map(g=>ie(g))),i=y(()=>a.value.current<a.value.total?[d.value,a.value.current+1]:p.value?[m.value,0]:null),x=y(()=>i.value&&G.value[i.value[0].no-1]);M(i,()=>{x.value&&i.value&&(x.value.current=i.value[1])},{immediate:!0});const N=X();return Y(()=>{const g=r.value.querySelector("#slide-content"),s=Z(ee()),C=te();M(()=>{if(!C.value||L.value||!ce.value)return;const l=g.getBoundingClientRect(),_=(s.x-l.left)/l.width*100,f=(s.y-l.top)/l.height*100;if(!(_<0||_>100||f<0||f>100))return{x:_,y:f}},l=>{le.cursor=l})}),(g,s)=>{var F;const C=H,l=q,_=O,f=K,V=Q,W=J;return n(),k(ne,null,[t("div",De,[t("div",{class:E(["grid-container",`layout${e(me)}`])},[t("div",{ref_key:"main",ref:r,class:"relative grid-section main flex flex-col"},[o(D,{key:"main",class:"p-2 lg:p-4 flex-auto","is-main":"",onContextmenu:e($e)},{default:h(()=>[o(ye,{"render-context":"presenter"})]),_:1},8,["onContextmenu"]),(n(),c(ze,{key:(F=e(d))==null?void 0:F.no,"clicks-context":e(w)(e(d)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),s[4]||(s[4]=t("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1))],512),t("div",Ae,[i.value&&x.value?(n(),c(D,{key:"next"},{default:h(()=>[(n(),c(Me,{key:i.value[0].no,"clicks-context":x.value,route:i.value[0],"render-context":"previewNext"},null,8,["clicks-context","route"]))]),_:1})):(n(),k("div",Ee,s[5]||(s[5]=[t("div",{class:"text-gray-500"}," End of the presentation ",-1)]))),s[6]||(s[6]=t("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1))]),N.value&&e(de)?(n(),k("div",Ie,[o(e(N))])):(n(),k("div",Le,[(n(),c(Be,{key:`static-${e(u)}`,no:e(u),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:P({fontSize:`${e(pe)}em`}),"clicks-context":e(a)},null,8,["no","style","clicks-context"])),t("div",Re,[o(B,{title:"Increase font size",onClick:e(_e)},{default:h(()=>[o(C)]),_:1},8,["onClick"]),o(B,{title:"Decrease font size",onClick:e(fe)},{default:h(()=>[o(l)]),_:1},8,["onClick"]),se("v-if",!0)])])),t("div",je,[o(be,{persist:!0}),s[7]||(s[7]=t("div",{"flex-auto":""},null,-1)),t("div",Ge,[t("div",Ve,[o(_,{class:"group-hover:hidden text-xl"}),t("div",We,[t("div",{class:"relative op-80 hover:op-100",onClick:s[2]||(s[2]=(...S)=>e(z)&&e(z)(...S))},[e(j)?(n(),c(f,{key:0,class:"text-lg"})):(n(),c(V,{key:1}))]),t("div",{class:"op-80 hover:op-100",onClick:s[3]||(s[3]=(...S)=>e($)&&e($)(...S))},[o(W)])])]),t("div",He,oe(e(R)),1)])]),(n(),c(Ne,{key:2}))],2),t("div",qe,[t("div",{class:"progress h-3px bg-primary transition-all",style:P({width:`${(e(u)-1)/(e(I)-1)*100+1}%`})},null,4)])]),o(Ce),o(Se),o(we)],64)}}}),at=ve(Oe,[["__scopeId","data-v-15521ac8"]]);export{at as default};
